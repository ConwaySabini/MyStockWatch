{"version":3,"sources":["../../server/models/UserFavorites.js"],"names":["favoriteSchema","mongoose","Schema","symbol","String","data","Types","Mixed","percentChange","Number","timeline","id","favoritesSchema","_id","type","default","userId","favorites","timestamps","collection","statics","createUserFavorites","create","favaorites","error","updateUserFavorites","foundFavorites","findOne","findByIdAndUpdate","getFavoritesById","getFavoritesByUserId","getAllFavorites","find","deletFavoritesById","deleteOne","deleteStocksByUserId","getFavorites","ids","$in","users","model"],"mappings":"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","sourcesContent":["// imports\nimport mongoose from \"mongoose\";\nimport { nanoid } from \"nanoid\";\n\n// Schema for the favorite Objects\nconst favoriteSchema = new mongoose.Schema(\n  {\n    symbol: String,\n    data: [mongoose.Schema.Types.Mixed],\n    percentChange: Number,\n    timeline: String,\n    id: String,\n  },\n);\n\n// Schema for the user favorites model\nconst favoritesSchema = new mongoose.Schema(\n  {\n    _id: {\n      type: String,\n      default: () => nanoid(),\n    },\n    userId: String,\n    favorites: [favoriteSchema]\n  },\n  {\n    timestamps: true,\n    collection: \"favorites\",\n  }\n);\n\n// Creates user favorites\nfavoritesSchema.statics.createUserFavorites = async function (userId, favorites) {\n  try {\n    // create the favorites\n    return await this.create({ userId, favaorites });\n  } catch (error) {\n    throw error;\n  }\n}\n\n// Updates user favorite data\nfavoritesSchema.statics.updateUserFavorites = async function (userId, favorites) {\n  try {\n    // find the favorites for the specified user\n    const foundFavorites = await this.findOne({ userId: userId });\n    if (!foundFavorites) throw ({ error: 'No stocks with this userId found' });\n    // update the favorites\n    this.findByIdAndUpdate(foundFavorites._id, { favorites: favorites });\n  } catch (error) {\n    throw error;\n  }\n}\n\n// Get the favorites by their id and return the found favorites if they exist\nfavoritesSchema.statics.getFavoritesById = async function (id) {\n  try {\n    const favorites = await this.findOne({ _id: id });\n    if (!favorites) throw ({ error: 'No favorites with this id found' });\n    return favorites;\n  } catch (error) {\n    throw error;\n  }\n}\n\n// Get the favorites by their userId and return the found favorites if they exist\nfavoritesSchema.statics.getFavoritesByUserId = async function (userId) {\n  try {\n    const favorites = await this.findOne({ userId: userId });\n    if (!favorites) throw ({ error: 'No favorites with this userId found' });\n    return favorites;\n  } catch (error) {\n    throw error;\n  }\n}\n\n// Get all user favorites in the database and return them\nfavoritesSchema.statics.getAllFavorites = async function () {\n  try {\n    return await this.find();\n  } catch (error) {\n    throw error;\n  }\n}\n\n// Delete favorites with the given id and return the result\nfavoritesSchema.statics.deletFavoritesById = async function (id) {\n  try {\n    return await this.deleteOne({ _id: id });\n  } catch (error) {\n    throw error;\n  }\n}\n\n// Delete the favorites by their userId and return result\nfavoritesSchema.statics.deleteStocksByUserId = async function (userId) {\n  try {\n    return await this.deleteOne({ userId: userId });\n  } catch (error) {\n    throw error;\n  }\n}\n\n\n// Get favorites by their ids and return the found favorites\nfavoritesSchema.statics.getFavorites = async function (ids) {\n  try {\n    const favorites = await this.find({ _id: { $in: ids } });\n    if (!favorites) throw ({ error: 'No favorites with these ids were found' });\n    return users;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport default mongoose.model(\"UserFavorites\", favoritesSchema);\n"],"file":"UserFavorites.js"}